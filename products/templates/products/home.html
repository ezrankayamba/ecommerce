{% extends 'core/base.html' %} {% load static %} {% block content %}
<div id="main-section" class="row pl-3">
  <div id="carousel-products" class="carousel slide col-md-8" data-ride="carousel">
    <ol class="carousel-indicators">
       {% for prd_img in product_images %}
         <li data-target="#carousel-products" data-slide-to="0" ></li>
       {% endfor %}
    </ol>
    <div class="carousel-inner">
      {% for prd_img in product_images %}
        <div class="carousel-item">
          <img src="{{ prd_img.image.url }}" class="d-block w-100" alt="{{ prd_img.product.title }}" />
          <div class="carousel-caption d-none d-md-block">
            <h5>{{ prd_img.product.title }}</h5>
            <p>{{ prd_img.product.description }}</p>
          </div>
        </div>
      {% endfor %}
    </div>
    <a class="carousel-control-prev" href="#carousel-products" role="button" data-slide="prev">
      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carousel-products" role="button" data-slide="next">
      <span class="carousel-control-next-icon" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
  </div>
  <div id="topproducts" class="col-md-4">
    <h5 class="title bg-light p-1">Top products</h5>
    <div class="side-product-list">
      {% for product in products %}
        {% if forloop.counter < 3 %}
          <div class="wrap">
            <h6>Product 1</h6>
            <div class="product row">
              <div class="col-md-6">
                {% if product.images.first %}
                  <img src="{{ product.images.first.image.url }}" />
                {% else %}
                  <img src="{% static 'core/img/product-image-placeholder.png' %}"/>
                {% endif %}
              </div>
              <div class="col-md-6">
                <p class="price">$9.99</p>
                <a href="#" role="button" class="btn btn-outline-secondary btn-sm">Add to cart</a>
              </div>
            </div>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
            tempor </p>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</div>
<div class="product-container">
  {% for product in products %}
  <div class="product-display">
    <div class="slideshow">
      {% if product.images.first %}
        <img class="slide" src="{{ product.images.first.image.url }}" />
      {% else %}
        <img class="slide" src="{% static 'core/img/product-image-placeholder.png' %}"/>
      {% endif %}
    </div>
    <div class="product-content">
      <h5>{{ product.title }}</h5>
      <p>{{ product.description }}</p>
      <button class="btn btn-outline-primary">Add to cart</button>
    </div>
  </div>
  {% endfor %}
</div>

<script type="text/javascript">
  let firstCarousalItem=document.querySelector('.carousel-item')
  firstCarousalItem.classList.add('active')
  // function sleep(delay) {
  //   var start = new Date().getTime();
  //   while (new Date().getTime() < start + delay);
  // }
  // let slideshows = document.querySelectorAll(".slideshow");

  // slideshows.forEach(slideshow => {
  //   let sidx = 0;
  //   let slides = slideshow.querySelectorAll(".slide");
  //   let slideMe = () => {
  //     console.log("Slide me ...", sidx);
  //     slides.forEach(slide => {
  //       slide.classList.remove("slide-show");
  //     });
  //     sidx++;
  //     if (sidx > slides.length) {
  //       sidx = 1;
  //     }
  //     slides[sidx - 1].classList.add("slide-show");
  //     setTimeout(slideMe, 8000);
  //   };
  //   slideMe();
  // });
</script>
{% endblock %}
